\hypertarget{color__removal_8h}{}\doxysection{src/preproc/color\+\_\+removal/color\+\_\+removal.h File Reference}
\label{color__removal_8h}\index{src/preproc/color\_removal/color\_removal.h@{src/preproc/color\_removal/color\_removal.h}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{color__removal_8h_a916836517383411ed420677f40cc2dcd}{surface\+\_\+to\+\_\+grayscale}} (SDL\+\_\+\+Surface $\ast$surface)
\begin{DoxyCompactList}\small\item\em Turns a surface into grayscale. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{color__removal_8h_a24fa3688a16d996344575681ae988134}{surface\+\_\+to\+\_\+binary}} (SDL\+\_\+\+Surface $\ast$surface, int threshold)
\item 
int \mbox{\hyperlink{color__removal_8h_a1dffa7e09981c4705e52c62f79ad57b1}{otsu}} (SDL\+\_\+\+Surface $\ast$surface)
\begin{DoxyCompactList}\small\item\em Finds the threshold of an image using Otsu\textquotesingle{}s method. \end{DoxyCompactList}\item 
SDL\+\_\+\+Surface $\ast$ \mbox{\hyperlink{color__removal_8h_a017c197cebef5a7b13cbb4a418ca3ede}{blur}} (SDL\+\_\+\+Surface $\ast$surface)
\begin{DoxyCompactList}\small\item\em Applies a blur filter to a surface. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{color__removal_8h_a017c197cebef5a7b13cbb4a418ca3ede}\label{color__removal_8h_a017c197cebef5a7b13cbb4a418ca3ede}} 
\index{color\_removal.h@{color\_removal.h}!blur@{blur}}
\index{blur@{blur}!color\_removal.h@{color\_removal.h}}
\doxysubsubsection{\texorpdfstring{blur()}{blur()}}
{\footnotesize\ttfamily SDL\+\_\+\+Surface $\ast$ blur (\begin{DoxyParamCaption}\item[{SDL\+\_\+\+Surface $\ast$}]{surface }\end{DoxyParamCaption})}



Applies a blur filter to a surface. 


\begin{DoxyParams}{Parameters}
{\em surface} & The surface which we want to blur \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A new blurred surface 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{color__removal_8c_source_l00142}{142}} of file \mbox{\hyperlink{color__removal_8c_source}{color\+\_\+removal.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00143 \{}
\DoxyCodeLine{00144     \textcolor{keywordtype}{int} kernel[] = \{1, 2, 1, 2, 4, 2, 1, 2, 1\};}
\DoxyCodeLine{00145     \textcolor{keywordtype}{int} size = 3;}
\DoxyCodeLine{00146 }
\DoxyCodeLine{00147     SDL\_Surface *new\_surface}
\DoxyCodeLine{00148         = SDL\_CreateRGBSurface(0, surface-\/>w, surface-\/>h, 32, 0, 0, 0, 0);}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150     Uint32 *pixels = surface-\/>pixels;}
\DoxyCodeLine{00151     Uint32 *new\_pixels = new\_surface-\/>pixels;}
\DoxyCodeLine{00152     Uint8 r, g, b;}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < surface-\/>w; x++)}
\DoxyCodeLine{00155         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < surface-\/>h; y++)}
\DoxyCodeLine{00156         \{}
\DoxyCodeLine{00157             \textcolor{keywordtype}{int} shift = size / 2;}
\DoxyCodeLine{00158             \textcolor{keywordtype}{int} weight = 0, sum = 0, ki = 0;}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} s\_x = shift -\/ size; s\_x < shift; s\_x++)}
\DoxyCodeLine{00161                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} s\_y = shift -\/ size; s\_y < shift; s\_y++)}
\DoxyCodeLine{00162                 \{}
\DoxyCodeLine{00163                     \textcolor{keywordtype}{int} coord = (y + s\_y) * surface-\/>w + x + s\_x;}
\DoxyCodeLine{00164                     if (coord >= 0)}
\DoxyCodeLine{00165                     \{}
\DoxyCodeLine{00166                         SDL\_GetRGB(pixels[coord], surface-\/>format, \&r, \&g, \&b);}
\DoxyCodeLine{00167 }
\DoxyCodeLine{00168                         sum += kernel[ki]}
\DoxyCodeLine{00169                                * floor(0.299 * r + 0.587 * g + 0.114 * b);}
\DoxyCodeLine{00170                         weight += kernel[ki];}
\DoxyCodeLine{00171                     \}}
\DoxyCodeLine{00172                     ki++;}
\DoxyCodeLine{00173                 \}}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00175             \textcolor{keywordtype}{int} coord = y * surface-\/>w + x;}
\DoxyCodeLine{00176             \textcolor{keywordtype}{int} c = sum / weight;}
\DoxyCodeLine{00177 }
\DoxyCodeLine{00178             Uint32 color = SDL\_MapRGB(surface-\/>format, c, c, c);}
\DoxyCodeLine{00179             new\_pixels[coord] = color;}
\DoxyCodeLine{00180         \}}
\DoxyCodeLine{00181 }
\DoxyCodeLine{00182     \textcolor{keywordflow}{return} new\_surface;}
\DoxyCodeLine{00183 \}}

\end{DoxyCode}
\mbox{\Hypertarget{color__removal_8h_a1dffa7e09981c4705e52c62f79ad57b1}\label{color__removal_8h_a1dffa7e09981c4705e52c62f79ad57b1}} 
\index{color\_removal.h@{color\_removal.h}!otsu@{otsu}}
\index{otsu@{otsu}!color\_removal.h@{color\_removal.h}}
\doxysubsubsection{\texorpdfstring{otsu()}{otsu()}}
{\footnotesize\ttfamily int otsu (\begin{DoxyParamCaption}\item[{SDL\+\_\+\+Surface $\ast$}]{surface }\end{DoxyParamCaption})}



Finds the threshold of an image using Otsu\textquotesingle{}s method. 


\begin{DoxyParams}{Parameters}
{\em surface} & The surface which threshold we want \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The threhsold 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{color__removal_8c_source_l00087}{87}} of file \mbox{\hyperlink{color__removal_8c_source}{color\+\_\+removal.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00088 \{}
\DoxyCodeLine{00089     \textcolor{keywordtype}{int} histo[256] = \{0\};}
\DoxyCodeLine{00090     fill\_histo(surface, histo);}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092     \textcolor{keywordtype}{int} total = surface-\/>w * surface-\/>h;}
\DoxyCodeLine{00093     \textcolor{keywordtype}{int} level = 0;}
\DoxyCodeLine{00094     \textcolor{keywordtype}{double} sumB = 0, max = 0, sum = 0, wB = 0;}
\DoxyCodeLine{00095     \textcolor{keywordtype}{double} wF, mean\_F;}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 256; i++)}
\DoxyCodeLine{00098         sum += i * histo[i];}
\DoxyCodeLine{00099 }
\DoxyCodeLine{00100     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < 200; i++)}
\DoxyCodeLine{00101     \{}
\DoxyCodeLine{00102         wF = total -\/ wB;}
\DoxyCodeLine{00103         \textcolor{keywordflow}{if} (wB > 0 \&\& wF > 0)}
\DoxyCodeLine{00104         \{}
\DoxyCodeLine{00105             mean\_F = (sum -\/ sumB) / wF;}
\DoxyCodeLine{00106             \textcolor{keywordtype}{double} val}
\DoxyCodeLine{00107                 = wB * wF * ((sumB / wB) -\/ mean\_F) * ((sumB / wB) -\/ mean\_F);}
\DoxyCodeLine{00108             \textcolor{keywordflow}{if} (val >= max)}
\DoxyCodeLine{00109             \{}
\DoxyCodeLine{00110                 level = i;}
\DoxyCodeLine{00111                 max = val;}
\DoxyCodeLine{00112             \}}
\DoxyCodeLine{00113         \}}
\DoxyCodeLine{00114         wB += histo[i];}
\DoxyCodeLine{00115         sumB = sumB + (i -\/ 1) * histo[i];}
\DoxyCodeLine{00116     \}}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118     \textcolor{keywordflow}{return} level;}
\DoxyCodeLine{00119 \}}

\end{DoxyCode}
\mbox{\Hypertarget{color__removal_8h_a24fa3688a16d996344575681ae988134}\label{color__removal_8h_a24fa3688a16d996344575681ae988134}} 
\index{color\_removal.h@{color\_removal.h}!surface\_to\_binary@{surface\_to\_binary}}
\index{surface\_to\_binary@{surface\_to\_binary}!color\_removal.h@{color\_removal.h}}
\doxysubsubsection{\texorpdfstring{surface\_to\_binary()}{surface\_to\_binary()}}
{\footnotesize\ttfamily void surface\+\_\+to\+\_\+binary (\begin{DoxyParamCaption}\item[{SDL\+\_\+\+Surface $\ast$}]{surface,  }\item[{int}]{threshold }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{color__removal_8c_source_l00048}{48}} of file \mbox{\hyperlink{color__removal_8c_source}{color\+\_\+removal.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00049 \{}
\DoxyCodeLine{00050     Uint32 *pixels = surface-\/>pixels;}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (surface-\/>w * surface-\/>h); i++)}
\DoxyCodeLine{00053         pixels[i] = pixel\_to\_binary(pixels[i], surface, threshold);}
\DoxyCodeLine{00054 \}}

\end{DoxyCode}
\mbox{\Hypertarget{color__removal_8h_a916836517383411ed420677f40cc2dcd}\label{color__removal_8h_a916836517383411ed420677f40cc2dcd}} 
\index{color\_removal.h@{color\_removal.h}!surface\_to\_grayscale@{surface\_to\_grayscale}}
\index{surface\_to\_grayscale@{surface\_to\_grayscale}!color\_removal.h@{color\_removal.h}}
\doxysubsubsection{\texorpdfstring{surface\_to\_grayscale()}{surface\_to\_grayscale()}}
{\footnotesize\ttfamily void surface\+\_\+to\+\_\+grayscale (\begin{DoxyParamCaption}\item[{SDL\+\_\+\+Surface $\ast$}]{surface }\end{DoxyParamCaption})}



Turns a surface into grayscale. 


\begin{DoxyParams}{Parameters}
{\em surface} & The surface to turn into grayscale \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{color__removal_8c_source_l00022}{22}} of file \mbox{\hyperlink{color__removal_8c_source}{color\+\_\+removal.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00023 \{}
\DoxyCodeLine{00024     Uint32 *pixels = surface-\/>pixels;}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (surface-\/>w * surface-\/>h); i++)}
\DoxyCodeLine{00027         pixels[i] = pixel\_to\_grayscale(pixels[i], surface);}
\DoxyCodeLine{00028 \}}

\end{DoxyCode}
