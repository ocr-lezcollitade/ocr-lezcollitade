\hypertarget{rotate_8c}{}\doxysection{src/preproc/rotate/rotate.c File Reference}
\label{rotate_8c}\index{src/preproc/rotate/rotate.c@{src/preproc/rotate/rotate.c}}
{\ttfamily \#include $<$SDL2/\+SDL.\+h$>$}\newline
{\ttfamily \#include $<$SDL2/\+SDL\+\_\+image.\+h$>$}\newline
{\ttfamily \#include $<$err.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include \char`\"{}rotate.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
SDL\+\_\+\+Surface $\ast$ \mbox{\hyperlink{rotate_8c_af20e4dd51ce0a15d27ec571c956741bb}{rotate\+\_\+surface}} (SDL\+\_\+\+Surface $\ast$surface, double deg)
\item 
void \mbox{\hyperlink{rotate_8c_abaff7e12c98b996f3b2acfcd53f88f38}{rotate\+\_\+image}} (const char $\ast$file, double deg)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{rotate_8c_abaff7e12c98b996f3b2acfcd53f88f38}\label{rotate_8c_abaff7e12c98b996f3b2acfcd53f88f38}} 
\index{rotate.c@{rotate.c}!rotate\_image@{rotate\_image}}
\index{rotate\_image@{rotate\_image}!rotate.c@{rotate.c}}
\doxysubsubsection{\texorpdfstring{rotate\_image()}{rotate\_image()}}
{\footnotesize\ttfamily void rotate\+\_\+image (\begin{DoxyParamCaption}\item[{const char $\ast$}]{file,  }\item[{double}]{deg }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{rotate_8c_source_l00063}{63}} of file \mbox{\hyperlink{rotate_8c_source}{rotate.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00064 \{}
\DoxyCodeLine{00065     \textcolor{keywordflow}{if} (SDL\_Init(SDL\_INIT\_VIDEO) != 0)}
\DoxyCodeLine{00066         errx(EXIT\_FAILURE, \textcolor{stringliteral}{"{}\%s"{}}, SDL\_GetError());}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068     SDL\_Surface *surface = load\_image(file);}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070     SDL\_Surface *new\_surface = \mbox{\hyperlink{rotate_8c_af20e4dd51ce0a15d27ec571c956741bb}{rotate\_surface}}(surface, deg);}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072     \textcolor{keywordflow}{if} (IMG\_SavePNG(new\_surface, \textcolor{stringliteral}{"{}res.png"{}}) != 0)}
\DoxyCodeLine{00073         errx(EXIT\_FAILURE, \textcolor{stringliteral}{"{}\%s"{}}, SDL\_GetError());}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075     SDL\_FreeSurface(new\_surface);}
\DoxyCodeLine{00076     SDL\_FreeSurface(surface);}
\DoxyCodeLine{00077     SDL\_Quit();}
\DoxyCodeLine{00078 \}}

\end{DoxyCode}
\mbox{\Hypertarget{rotate_8c_af20e4dd51ce0a15d27ec571c956741bb}\label{rotate_8c_af20e4dd51ce0a15d27ec571c956741bb}} 
\index{rotate.c@{rotate.c}!rotate\_surface@{rotate\_surface}}
\index{rotate\_surface@{rotate\_surface}!rotate.c@{rotate.c}}
\doxysubsubsection{\texorpdfstring{rotate\_surface()}{rotate\_surface()}}
{\footnotesize\ttfamily SDL\+\_\+\+Surface $\ast$ rotate\+\_\+surface (\begin{DoxyParamCaption}\item[{SDL\+\_\+\+Surface $\ast$}]{surface,  }\item[{double}]{deg }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{rotate_8c_source_l00022}{22}} of file \mbox{\hyperlink{rotate_8c_source}{rotate.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00023 \{}
\DoxyCodeLine{00024     Uint32 *pixels = surface-\/>pixels;}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026     \textcolor{keywordtype}{int} width = surface-\/>w;}
\DoxyCodeLine{00027     \textcolor{keywordtype}{int} height = surface-\/>h;}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029     \textcolor{keywordtype}{int} len = width * height;}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031     deg = deg * M\_PI / 180;}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033     \textcolor{keywordtype}{int} midx = width / 2;}
\DoxyCodeLine{00034     \textcolor{keywordtype}{int} midy = height / 2;}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036     SDL\_Surface *new\_surface}
\DoxyCodeLine{00037         = SDL\_CreateRGBSurface(0, width, height, 32, 0, 0, 0, 0);}
\DoxyCodeLine{00038 }
\DoxyCodeLine{00039     Uint32 *new\_pixels = new\_surface-\/>pixels;}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < len; i++)}
\DoxyCodeLine{00042     \{}
\DoxyCodeLine{00043         \textcolor{keywordtype}{int} destx = i \% width;}
\DoxyCodeLine{00044         \textcolor{keywordtype}{int} desty = i / width;}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046         \textcolor{keywordtype}{int} sourcex}
\DoxyCodeLine{00047             = floor(cos(-\/deg) * (destx -\/ midx) -\/ sin(-\/deg) * (desty -\/ midy))}
\DoxyCodeLine{00048               + midx;}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050         \textcolor{keywordtype}{int} sourcey}
\DoxyCodeLine{00051             = floor(sin(-\/deg) * (destx -\/ midx) + cos(-\/deg) * (desty -\/ midy))}
\DoxyCodeLine{00052               + midy;}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054         \textcolor{keywordtype}{int} sourcei = sourcey * width + sourcex;}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00056         \textcolor{keywordflow}{if} (sourcei >= 0 \&\& sourcei < len)}
\DoxyCodeLine{00057             new\_pixels[i] = pixels[sourcei];}
\DoxyCodeLine{00058     \}}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060     \textcolor{keywordflow}{return} new\_surface;}
\DoxyCodeLine{00061 \}}

\end{DoxyCode}
